"use strict";var app=angular.module("monApp",["ui.router","ng-token-auth"]);app.config(["$stateProvider","$urlRouterProvider","$authProvider",function(a,b,c){c.configure([{"default":{apiUrl:"https://univ-mon.herokuapp.com",proxyIf:function(){window.isOldIE()}}},{prof:{apiUrl:"https://univ-mon.herokuapp.com",proxyIf:function(){window.isOldIE()},signOutUrl:"/prof_auth/sign_out",emailSignInPath:"/prof_auth/sign_in",emailRegistrationPath:"/prof_auth",accountUpdatePath:"/prof_auth",accountDeletePath:"/prof_auth",passwordResetPath:"/prof_auth/password",passwordUpdatePath:"/prof_auth/password",tokenValidationPath:"/prof_auth/validate_token"}}]),b.otherwise("/login"),a.state("login",{url:"/login",templateUrl:"views/sessions/new.html",controller:"IndexCtrl"}).state("products",{url:"/products",templateUrl:"views/products/index.html",resolve:{auth:["$auth","$state",function(a,b){return a.validateUser().then(function(a){"prof"==a.configName&&b.go("not_authorized")})["catch"](function(){b.go("login")})}]},controller:"ProductsCtrl"}).state("courses",{url:"/courses",templateUrl:"views/courses/index.html",resolve:{auth:["$auth","$state",function(a,b){return a.validateUser().then(function(a){"default"==a.configName&&b.go("not_authorized")})["catch"](function(){b.go("login")})}]},controller:"CoursesCtrl"}).state("not_authorized",{url:"/not_authorized",templateUrl:"views/not_authorized.html"})}]),app.controller("IndexCtrl",["$scope","$auth","$rootScope","$state",function(a,b,c,d){a.student=!1,a.professor=!1,a.toggleForm=function(b){"student"===b?(a.student=!0,a.professor=!1):(a.student=!1,a.professor=!0)},c.$on("auth:login-success",function(a,b){console.log("Successful login!"),"default"==b.configName?(console.log("Routing to Student access.."),d.go("products")):"prof"==b.configName&&(console.log("Routing to Professor access.."),d.go("courses"))}),c.$on("auth:login-error",function(b,c){a.errors=c.errors[0]})}]),app.controller("ProductsCtrl",["$scope","$auth","$rootScope","Product",function(a,b,c,d){d.all().then(function(b){a.products=b});var e=function(){console.log(b)};e()}]),app.service("Product",["$http","$auth",function(a,b){this.all=function(){return a.get(b.apiUrl()+"/products")}}]),app.service("Course",["$http","$auth",function(a,b){this.all=function(){return a.get(b.apiUrl()+"/courses")}}]),app.controller("CoursesCtrl",["$scope","Course",function(a,b){b.all().then(function(b){a.courses=b})}]);